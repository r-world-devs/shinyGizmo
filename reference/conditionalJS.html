<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Run JS when condition is met — jsCallOncePerFlush • shinyGizmo</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Run JS when condition is met — jsCallOncePerFlush"><meta property="og:description" content="`conditionalJS` is an extended version of conditionalPanel.
The function allows to run selected or custom JS action when the provided
condition is true or false.
To see the possible JS actions check jsCalls.
Optionally call `jsCallOncePerFlush` in server to assure the call is run once
per application flush cycle (see. https://github.com/rstudio/shiny/issues/3668).
This prevents i.e. running animation multiple times when
`runAnimation(once = FALSE)` is used."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shinyGizmo</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-thumbs-o-up"></span>
     
    Get started
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/r-world-devs/shinyGizmo" class="external-link">
    <span class="fa fa-ambulance"></span>
     
    Issues
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Run JS when condition is met</h1>
    
    <div class="hidden name"><code>conditionalJS.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>`conditionalJS` is an extended version of <a href="https://shiny.rstudio.com/reference/shiny/latest/conditionalPanel.html" class="external-link">conditionalPanel</a>.
The function allows to run selected or custom JS action when the provided
condition is true or false.</p>
<p>To see the possible JS actions check <a href="jsCalls.html">jsCalls</a>.</p>
<p>Optionally call `jsCallOncePerFlush` in server to assure the call is run once
per application flush cycle (see. https://github.com/rstudio/shiny/issues/3668).
This prevents i.e. running animation multiple times when
`runAnimation(once = FALSE)` is used.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">jsCallOncePerFlush</span><span class="op">(</span><span class="va">session</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">conditionalJS</span><span class="op">(</span><span class="va">ui</span>, <span class="va">condition</span>, <span class="va">jsCall</span>, once <span class="op">=</span> <span class="cn">TRUE</span>, ns <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>session</dt>
<dd><p>Shiny session object.</p></dd>


<dt>ui</dt>
<dd><p>A `shiny.tag` element to which the JS callback should be attached.</p></dd>


<dt>condition</dt>
<dd><p>A JavaScript expression that will be evaluated repeatedly.
When the evaluated `condition` is true, `jsCall`'s true (`jsCall$true`) callback is run,
when false -  `jsCall$false` is executed in application browser.</p></dd>


<dt>jsCall</dt>
<dd><p>A list of two `htmltools::JS` elements named 'true' and 'false'
storing JS expressions.
The 'true' object is evaluated when `condition` is true, 'false' otherwise.
In order to skip true/false callback assign it to NULL (or skip).
Use `this` object in the expressions to refer to the `ui` object.
See <a href="jsCalls.html">jsCalls</a> for possible actions.</p></dd>


<dt>once</dt>
<dd><p>Should the JS action be called only when condition state changes?</p></dd>


<dt>ns</dt>
<dd><p>The <a href="https://shiny.rstudio.com/reference/shiny/latest/NS.html" class="external-link">NS</a> object of the current module, if any.</p></dd>

</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">tags</span><span class="op">$</span><span class="fu">style</span><span class="op">(</span><span class="st">".boldme {font-weight: bold;}"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/sliderInput.html" class="external-link">sliderInput</a></span><span class="op">(</span><span class="st">"value"</span>, <span class="st">"Value"</span>, min <span class="op">=</span> <span class="fl">1</span>, max <span class="op">=</span> <span class="fl">10</span>, value <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/textOutput.html" class="external-link">textOutput</a></span><span class="op">(</span><span class="st">"slid_val"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">conditionalJS</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span><span class="st">"Show me when slider value at least 3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"input.value &gt;= 3"</span>,</span></span>
<span class="r-in"><span>      <span class="va">jsCalls</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">hr</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">conditionalJS</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span><span class="st">"Show me when value less than 3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"input.value &gt;= 3"</span>,</span></span>
<span class="r-in"><span>      <span class="va">jsCalls</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span>when <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">hr</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">conditionalJS</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span><span class="st">"I'm disabled when value at least 4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"input.value &gt;= 4"</span>,</span></span>
<span class="r-in"><span>      <span class="va">jsCalls</span><span class="op">$</span><span class="fu">disable</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">hr</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">conditionalJS</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span><span class="st">"I'm disabled when value less than 4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"input.value &gt;= 4"</span>,</span></span>
<span class="r-in"><span>      <span class="va">jsCalls</span><span class="op">$</span><span class="fu">disable</span><span class="op">(</span>when <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">hr</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">conditionalJS</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span><span class="st">"I have class 'boldme' when value at least 5"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"input.value &gt;= 5"</span>,</span></span>
<span class="r-in"><span>      <span class="va">jsCalls</span><span class="op">$</span><span class="fu">attachClass</span><span class="op">(</span><span class="st">"boldme"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">hr</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">conditionalJS</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span><span class="st">"I change color when value at least 6"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"input.value &gt;= 6"</span>,</span></span>
<span class="r-in"><span>      <span class="va">jsCalls</span><span class="op">$</span><span class="fu">custom</span><span class="op">(</span></span></span>
<span class="r-in"><span>        true <span class="op">=</span> <span class="st">"$(this).css('background-color', 'red');"</span>,</span></span>
<span class="r-in"><span>        false <span class="op">=</span> <span class="st">"$(this).css('background-color', 'green');"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">hr</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">conditionalJS</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span><span class="st">"I change border when value at least 7"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"input.value &gt;= 7"</span>,</span></span>
<span class="r-in"><span>      <span class="va">jsCalls</span><span class="op">$</span><span class="fu">css</span><span class="op">(</span></span></span>
<span class="r-in"><span>        border <span class="op">=</span> <span class="st">"dashed"</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">hr</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">conditionalJS</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span><span class="st">"I'm disabled permanently when value at least 8"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"input.value &gt;= 8"</span>,</span></span>
<span class="r-in"><span>      <span class="va">jsCalls</span><span class="op">$</span><span class="fu">disable</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="st">"true"</span><span class="op">]</span> <span class="co"># remove false condition</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">hr</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">conditionalJS</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span><span class="st">"I bounce when value at least 9"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"input.value &gt;= 9"</span>,</span></span>
<span class="r-in"><span>      <span class="va">jsCalls</span><span class="op">$</span><span class="fu">custom</span><span class="op">(</span>true <span class="op">=</span> <span class="fu"><a href="custom-callbacks.html">runAnimation</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      once <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">output</span><span class="op">$</span><span class="va">slid_val</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/renderPrint.html" class="external-link">renderText</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">input</span><span class="op">$</span><span class="va">value</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">jsCallOncePerFlush</span><span class="op">(</span><span class="va">session</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">shinyGizmo</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"Name"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">conditionalJS</span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span><span class="st">"value"</span>, <span class="st">"Type name to enable the button"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="st">"input.name != ''"</span>,</span></span>
<span class="r-in"><span>      <span class="va">jsCalls</span><span class="op">$</span><span class="fu">disable</span><span class="op">(</span>when <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Krystian Igras.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

